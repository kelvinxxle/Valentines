<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üíò Tracey?</title>
  <style>
    :root { --yesScale: 1; --overlay: 0.45; }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow: hidden;
      background: #000; color: #fff;
    }

    /* Background */
    .bg {
      position: fixed; inset: 0;
      background-size: cover;
      background-position: center;
      transform: scale(1.02);
      transition: opacity 800ms ease;
    }
    .bg::after {
      content: ""; position: absolute; inset: 0;
      background: rgba(0,0,0,var(--overlay));
    }

    /* Content */
    .wrap {
      position: relative; z-index: 2;
      min-height: 100vh;
      display: grid; place-items: center;
      padding: 24px; text-align: center;
    }
    .card {
      width: min(720px, 95vw);
      padding: 28px;
      border-radius: 22px;
      backdrop-filter: blur(10px);
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.20);
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
    }
    h1 { margin: 0 0 10px; font-size: clamp(28px, 4vw, 44px); }
    .sub { margin: 0 0 18px; opacity: 0.92; font-size: clamp(14px, 2vw, 18px); }

    .btnRow {
      display: flex;
      gap: 14px;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 14px;
      position: relative;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 14px 22px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: transform 150ms ease, box-shadow 150ms ease, opacity 150ms ease;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    #yesBtn {
      background: linear-gradient(135deg, #ff4d6d, #ff8fab);
      color: #fff;
      box-shadow: 0 14px 40px rgba(255, 77, 109, 0.35);
      transform: scale(var(--yesScale));
      transform-origin: center;
    }
    #yesBtn:active { transform: scale(calc(var(--yesScale) * 0.98)); }

    /* NO starts normal, then becomes a "runner" */
    #noBtn {
      background: rgba(255,255,255,0.18);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.25);
    }
    #noBtn.runner {
      position: fixed; /* so it can run anywhere on screen */
      left: 50%;
      top: 62%;
      transform: translate(-50%, -50%);
      z-index: 50;
    }

    /* Fullscreen YES takeover */
    .takeover {
      position: fixed; inset: 0;
      z-index: 9999;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(8px);
    }
    .takeover.show { display: flex; }

    .bigYes {
      width: min(92vw, 900px);
      height: min(70vh, 520px);
      border-radius: 32px;
      font-size: clamp(28px, 6vw, 60px);
      box-shadow: 0 30px 100px rgba(255, 77, 109, 0.45);
      background: linear-gradient(135deg, #ff4d6d, #ff8fab);
      color: #fff;
    }

    .footerNote { margin-top: 14px; opacity: 0.8; font-size: 14px; }
  </style>
</head>
<body>
  <div class="bg" id="bg"></div>

  <div class="wrap">
    <div class="card" id="card">
      <h1>Tracey, will you be my Valentine? üíò</h1>
      <p class="sub" id="sub">Baby, pick ‚ÄúYes‚Äù üòå</p>

      <div class="btnRow" id="btnRow">
        <button id="yesBtn">Yes üíû</button>
        <button id="noBtn">No üôÉ</button>
      </div>

      <div class="footerNote" id="note"></div>
    </div>
  </div>

  <div class="takeover" id="takeover">
    <button class="bigYes" id="bigYes">YES üíñ</button>
  </div>

  <script>
    // Put these files at:
    // photos/1.jpg, photos/2.jpg, photos/3.jpg
    const photos = ["photos/1.jpg", "photos/2.jpg", "photos/3.jpg"];

    // Background slideshow
    const bg = document.getElementById("bg");
    let idx = Math.floor(Math.random() * photos.length);

    function setBg(i, fade=true) {
      if (!photos.length) return;
      if (fade) bg.style.opacity = "0";
      setTimeout(() => {
        bg.style.backgroundImage = `url('${photos[i]}')`;
        bg.style.opacity = "1";
      }, fade ? 250 : 0);
    }
    setBg(idx, false);
    setInterval(() => {
      idx = (idx + 1) % photos.length;
      setBg(idx, true);
    }, 4500);

    // YES/NO logic
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const sub    = document.getElementById("sub");
    const note   = document.getElementById("note");
    const takeover = document.getElementById("takeover");
    const bigYes = document.getElementById("bigYes");
    const card   = document.getElementById("card");

    let noClicks = 0;
    let yesScale = 1;
    let runnerMode = false;

    const noLines = [
      "Baby‚Ä¶ be serious üò≥",
      "You cannot be clicking that ü•∫",
      "Tracey‚Ä¶ I‚Äôm literally begging üò≠",
      "Ok now you‚Äôre just playing ü§®",
      "I‚Äôm gonna keep asking üò§",
      "Last chance üòå",
      "You did this to yourself üòà"
    ];

    function applyScale() {
      document.documentElement.style.setProperty("--yesScale", yesScale.toFixed(3));
    }

    function showTakeover() { takeover.classList.add("show"); }

    function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

    // Move the NO button somewhere annoying but still tappable.
    function teleportNoButton() {
      const padding = 14;
      const rect = noBtn.getBoundingClientRect();

      // Keep it inside the viewport.
      const maxX = window.innerWidth  - rect.width  - padding;
      const maxY = window.innerHeight - rect.height - padding;

      // Avoid covering the Yes button area too often: bias to upper half a bit.
      const x = Math.random() * maxX + padding;
      const y = Math.random() * (maxY * 0.80) + padding; // top 80%

      noBtn.style.left = `${clamp(x, padding, maxX)}px`;
      noBtn.style.top  = `${clamp(y, padding, maxY)}px`;
    }

    function enableRunnerMode() {
      if (runnerMode) return;
      runnerMode = true;
      noBtn.classList.add("runner");
      teleportNoButton();

      // Desktop: run away on hover / mouse move near it.
      noBtn.addEventListener("mouseenter", teleportNoButton);
      noBtn.addEventListener("mousemove", teleportNoButton);

      // Mobile: run away when they try to tap it (touchstart happens before click).
      noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault();
        teleportNoButton();
      }, { passive: false });

      note.textContent = "No is now in escape mode üòà";
    }

    noBtn.addEventListener("click", () => {
      noClicks++;

      // After first click: activate runner mode.
      if (noClicks >= 1) enableRunnerMode();

      // Make YES grow aggressively
      yesScale = Math.min(12, yesScale * 1.28 + 0.18);
      applyScale();

      sub.textContent = noLines[Math.min(noLines.length - 1, noClicks - 1)];
      if (!runnerMode) note.textContent = `No clicks: ${noClicks}`;

      if (yesScale >= 6) showTakeover();
    });

    function accept() {
      card.innerHTML = `
        <h1>YAYYYYY BABY üíñ</h1>
        <p class="sub">Ok Tracey, you‚Äôre locked in. Valentine‚Äôs is ours üòå</p>
        <p class="footerNote">Screenshot this and send it to me ‚ù§Ô∏è</p>
      `;
      takeover.classList.remove("show");
      // Stop the runner if it exists
      try { noBtn.remove(); } catch {}
    }

    yesBtn.addEventListener("click", accept);
    bigYes.addEventListener("click", accept);

    // Keep runner inside bounds on rotate/resize
    window.addEventListener("resize", () => {
      if (runnerMode) teleportNoButton();
    });
  </script>
</body>
</html>
